import React from 'react';

import { CryptoPrice } from '../../packages/react-coingecko/src/components/CryptoPrice/CryptoPrice';
import { CoinGeckoProvider } from '../../packages/react-coingecko/src/providers';
import { useCryptoPricesContext } from '../../packages/react-coingecko/src/providers/coingecko';
import {
  CryptoSymbol,
  CryptoUnits,
} from '../../packages/react-coingecko/src/types';

export default {
  title: 'CryptoPrice Component',
  decorators: [
    (Story: any) => (
      <CoinGeckoProvider>
        <Story />
      </CoinGeckoProvider>
    ),
  ],
};

export const Default = () => {
  const {
    state: { error, loading },
  } = useCryptoPricesContext();

  return (
    <>
      <ul className="grid gap-4">
        <li>
          ETH Price = <CryptoPrice symbol={'rETH'} />
        </li>
        <li>
          Value = 0.06 ETH ={' '}
          <CryptoPrice value={'0.06'} symbol={'ETH'} unit={CryptoUnits.ETHER} />{' '}
          USD
        </li>
        <li>error = {error?.message || error?.toString()}</li>
        <li>loading = {loading ? 'Yes...' : 'Idle'}</li>
      </ul>
    </>
  );
};
